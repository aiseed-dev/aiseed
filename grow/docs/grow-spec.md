# Grow - 自然派向け栽培記録アプリ 仕様書

作成日：2025年1月9日

---

## 1. コンセプト

### 1.1 背景

既存の栽培記録アプリは慣行農法向けに設計されており、肥料や農薬の投入量・タイミングの記録が中心となっている。自然系、特に福岡正信氏の自然農法では「何をしたか」ではなく「何が起きているか」を観察することが重要であり、既存アプリでは対応できない。

福岡正信氏の自然農法が難しいのは、栽培マニュアルがあるわけではなくて、植物の生態及び土壌生物学や気象を理解している必要があることである。

### 1.2 目的

自分の畑のデータを蓄積し、その場所に最適化された農法を発見するためのツールを提供する。気象データと観察記録を組み合わせることで、経験の蓄積を加速し、本来の自然農法に近づくことを目指す。

### 1.3 位置づけ：皆で協力するためのツール

本アプリは、自然系の農業に取り組む人々が協力し合うための共有基盤である。

| 協力の形 | 内容                            |
|----------|-------------------------------|
| 知識の共有 | 公開された観察記録から、地域ごとのパターンを学び合う    |
| データの蓄積 | 個人の記録が集まることで、自然農法の科学的な知見が生まれる |
| AI訓練への貢献 | 公開データを使い、自然農法に特化したAIモデルを育てる   |
| 技術と農の橋渡し | ITの力で、自然農法の実践者に必要なツールを提供する    |

自然農法では、土壌と気象のデータが重要で。その記録と分析ができて初めて再現性が出てくる。これにより、自然農法を進歩させることに貢献できる。

### 1.4 設計思想

| 原則 | 説明 |
|------|------|
| データは自分のもの | サービス終了リスクなし、どこに何があるか自分で管理 |
| 分散管理 | 唯一のマスターを作らず、複数の保存先を活用 |
| 選択式 | 公開/非公開、座標の扱い、温度計など、ユーザーが判断 |
| 特化 | 汎用化せず、自然農法の観察記録に特化 |
| 最小限 | 必要なものだけ、必要な時に追加 |
| 公開優先 | 公開できるものは公開し、無料ストレージを最大活用 |

---

## 2. システム構成

### 2.1 分散管理の考え方

写真や動画を扱う場合、「唯一のマスター」を持つことは現実的ではない。スマホで撮影した写真はGoogle PhotoやiCloudに自動バックアップされる。本アプリでは「どこに何があるか」をメタデータで管理する分散管理の考え方を採用する。

### 2.2 保存先の優先順位

Cloudflare Pagesを優先する。公開コンテンツは無料で容量無制限のため、野菜写真を公開にすることで主力ストレージとして活用できる。

| 優先 | 保存先 | 容量 | 用途 |
|------|--------|------|------|
| 1 | Cloudflare Pages | 無制限 | 公開写真（野菜）→ 主力 |
| 2 | Cloudflare R2 | 10GB無料 | 非公開写真（人物・風景） |
| 3 | ローカル（IndexedDB） | 端末依存 | オフライン閲覧用キャッシュ |
| 4 | Google Photo等 | 15GB共有 | 元データのバックアップ（任意） |

### 2.3 メタデータによる管理

D1にメタデータを保存し、写真がどこにあるかを管理する。

| 項目 | 内容 |
|------|------|
| 写真ID | 一意の識別子 |
| 保存先 | pages / r2 / local / google など |
| URL or パス | 実際のファイル場所 |
| 観察メモ | 自由記述 |
| 気候データ | 天気、気温、湿度等 |
| 土壌観察 | 草、色・匂い、感触等 |

### 2.4 運用の流れ

```
撮影
  ↓
アプリで取り込み → EXIF処理 → Pagesへ（基本）
  ↓
非公開にしたい → R2へ
  ↓
元データ残したい → Google Photo等に任意でバックアップ
```

### 2.5 認証

Cloudflare Access + GitHub OAuthを使用。自分のGitHubアカウントを許可。GoogleとAppleのアカウントにも要対応。Workers経由のD1/R2へのアクセス（読み取り・書き込みとも）に認証を要求。Pagesは公開のまま。

---

## 3. 写真管理

### 3.1 公開判定

| 写真の内容 | 保存先 | 理由             |
|------------|--------|----------------|
| 野菜のみ | Pages（公開） | EXIF削除で問題なし    |
| 人物・風景あり | R2（非公開） | 画像自体から場所特定される※ |
※営業を始めると場所を公開した方がいい場合も多い。
公開できるものは公開する。見られても問題ないから無料で提供される仕組みを活用する。
画像自体から場所特定される

### 3.2 座標（GPS）の扱い

ユーザーが選択できる方式とする。小さな畑が一つだけなら座標に意味はない。細かく管理したいなら、どの畑のどの場所かを特定するための管理データとして活用できる。

| 選択肢 | 説明 | 用途 |
|--------|------|------|
| 削除 | EXIFから座標を完全削除 | プライバシー重視 |
| 残す（非公開） | 座標を保持、管理データとして使用 | 畑の区画管理 |
| ぼかす | 数百m〜数kmずらして公開 | 地域ブランドは伝えたい |
| 公開 | 座標をそのまま公開 | 生産者として場所を知らせたい |

### 3.3 生産者への段階的移行

最初は非公開で安全に保存し、販売を始める段階で必要な写真をR2からPagesへ移動できる。生産者になるということは、プライバシーとばかり言っていられない。信頼を得るために顔や畑を公開する判断は、ユーザー自身が行う。

---

## 4. 記録項目

### 4.1 基本項目

| 項目 | 内容 | 取得方法 |
|------|------|----------|
| 写真 | 観察対象の画像 | カメラ撮影 |
| 日時 | 撮影日時 | EXIFから自動取得 |
| 座標 | 撮影場所 | EXIFから取得（選択式） |
| 観察メモ | 自由記述 | 手入力 |

### 4.2 気候データ

肥料や農薬で環境を制御する慣行農法と異なり、自然農法は土と天候に依存するため、気象データが必要。
気象庁及びENMWFの数値データやERA5を活用

| 項目 | 内容 | 取得方法 |
|------|------|------|
| 天気 | 晴れ、曇り、雨など | API/手入力 |
| 気温 | 外気温または温室内温度 | API/センサー/手入力 |
| 湿度 | 相対湿度 | API/センサー/手入力 |
| 降水量 | mm | API/手入力 |

### 4.3 温度計連携

温室栽培では、デジタル温度計との連携が必要。特定の製品に縛らず、複数の方式に対応する。

| 方式 | 説明 |
|------|------|
| 手入力 | 温度計を見て記録 |
| Bluetooth温度計 | SwitchBot、Inkbird、Xiaomiなど |
| Wi-Fiセンサー | 常時記録、後から取り込み |
| CSVインポート | 他システムからのデータ取り込み |

### 4.4 土壌観察

土壌は測定より観察から判断する。自然農法では数値化しにくい感覚的な情報が重要であり、日常的な観察記録を基本とする。疑問が生じた場合にのみ専門分析を利用する。

| カテゴリ | 観察内容 |
|----------|----------|
| 草 | 何が生えているか（スギナ→酸性など指標になる） |
| 色・匂い | 黒っぽい、土の香り、腐敗臭など |
| 感触 | ふかふか、硬い、粘土質、砂質 |
| 生き物 | ミミズ、ダンゴムシ、菌糸の有無 |
| 水 | はけ具合、溜まりやすさ |

### 4.5 専門分析の扱い

必要な場合のみ専門機関に土壌分析を依頼し、結果を記録に紐づける。頻繁に測定するものではないため、添付ファイル（PDF/写真）として保存できれば十分。

---

## 5. 一般的な栽培記録との違い

| 一般的な栽培記録 | 本アプリ（自然農法向け） |
|------------------|--------------------------|
| 肥料をいつ・どれだけ | 土の状態はどうか |
| 農薬を何回撒いた | 虫は何がいるか |
| 水やりの量 | 草の生え方 |
| 収量管理 | 植物同士の関係 |
| 人間の作業を記録 | 自然の変化を観察 |
| 予防的にすべてやる | 観察して必要なことだけやる |

慣行農法では予防的に全部やるため、何が本当に必要だったか分からない。自然農法では観察して判断するため、因果関係が見える。

---

## 6. データ活用

### 6.1 AIseed Sparkとの連携

栽培記録アプリは独立して動作し、希望者のみメタデータをAIseed Sparkにエクスポートできる。Sparkでは観察パターンから強みを発見する分析を行う。

### 6.2 AI訓練への活用

公開データは許可を得てAI訓練に使用可能。自分のデータを自分でコントロールできるため、訓練への提供も自分の意思で選べる。

| レベル | 方法 | 用途 |
|--------|------|------|
| 個人 | プロンプトに含める | 自分の記録を踏まえたアドバイス |
| コミュニティ | RAG | 複数人の記録から類似事例検索 |
| 本格的 | ファインチューニング | 自然農法特化モデル |

### 6.3 販売用ホームページへの活用

Cloudflare Pagesの公開写真はそのまま販売用ホームページの素材として使用できる。成長過程の写真は信頼性とストーリーを生み、生産者の顔が見える販売につながる。

---

## 7. 既存サービスとの比較

| 項目 | 既存サービス（そだレポ等） | 本アプリ |
|------|----------------------------|----------|
| データ所有 | プラットフォーム | 自分 |
| サービス終了リスク | あり | なし |
| オフライン | 不可 | 可能 |
| 公開/非公開 | プラットフォーム依存 | 写真単位で自分で制御 |
| プライバシー | 規約に依存 | EXIF削除、人物写真は非公開 |
| AI訓練への利用 | 規約次第 | 自分で決められる |

---

## 8. 無料枠

| サービス | 無料枠 | 備考 |
|----------|--------|------|
| Cloudflare Pages | 無制限 | 公開コンテンツ → 主力 |
| Cloudflare R2 | 10GB/月 | 非公開写真のみなので収まる |
| Cloudflare D1 | 5GB | メタデータには十分 |
| Cloudflare Workers | 10万リクエスト/日 | 個人使用には十分 |
| Cloudflare Access | 50ユーザー | 個人用なら1ユーザー |
| Google Photo | 15GB（共有） | 任意のバックアップ用 |

公開できるものは公開することで、無料で容量を気にせず使える構成となっている。見られても問題ないから無料という仕組みを理解して活用する。

---

## 9. 技術スタック

| 領域 | 技術 |
|------|------|
| フロントエンド | Flutter Web（自己完結型Widget） |
| バックエンド | Cloudflare Workers |
| データベース | Cloudflare D1（SQLite） |
| ストレージ | Cloudflare Pages（公開）/ R2（非公開） |
| 認証 | Cloudflare Access + GitHub OAuth |
| ローカル保存 | IndexedDB（キャッシュ） |

---

## 10. 今後の拡張

以下の機能は、追加を検討する。

- 土壌温度センサー対応
- 複数デバイス間の同期
- コミュニティでのデータ共有
